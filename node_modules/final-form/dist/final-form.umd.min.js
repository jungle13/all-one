!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@babel/runtime/helpers/esm/extends"),require("@babel/runtime/helpers/esm/objectWithoutPropertiesLoose")):"function"==typeof define&&define.amd?define(["exports","@babel/runtime/helpers/esm/extends","@babel/runtime/helpers/esm/objectWithoutPropertiesLoose"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).FinalForm={},e._extends,e._objectWithoutPropertiesLoose)}(this,(function(e,t,i){"use strict";var r=".".charCodeAt(0),n=/\\(\\)?/g,a=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),o={},u=/[.[\]]+/,s=function(e){if(null==e||!e.length)return[];if("string"!=typeof e)throw new Error("toPath() expects a string");var t,i;return null==o[e]&&(e.endsWith("[]")?o[e]=e.split(u).filter(Boolean):o[e]=(i=[],(t=e).charCodeAt(0)===r&&i.push(""),t.replace(a,(function(e,t,r,a){var o=e;return r?o=a.replace(n,"$1"):t&&(o=t.trim()),i.push(o),""})),i)),o[e]},d=function(e,t){for(var i=s(t),r=e,n=0;n<i.length;n++){var a=i[n];if(null==r||"object"!=typeof r||Array.isArray(r)&&isNaN(Number(a)))return;r=r[a]}return r};function l(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}var f=function(e,r,n,a,o){if(r>=n.length)return a;var u=n[r];if(isNaN(Number(u))){var s;if(null==e){var d,c=f(void 0,r+1,n,a,o);return void 0===c?void 0:((d={})[u]=c,d)}if(Array.isArray(e))throw new Error("Cannot set a non-numeric property on an array");var v=f(e[u],r+1,n,a,o);if(void 0===v){var m=Object.keys(e).length;if(void 0===e[u]&&0===m)return;return void 0!==e[u]&&m<=1?isNaN(Number(n[r-1]))||o?void 0:{}:(e[u],i(e,[u].map(l)))}return t({},e,((s={})[u]=v,s))}var b=Number(u);if(null==e){var S=f(void 0,r+1,n,a,o);if(void 0===S)return;var h=[];return h[b]=S,h}if(!Array.isArray(e))throw new Error("Cannot set a numeric property on an object");var g=e[b],y=f(g,r+1,n,a,o),p=[].concat(e);if(o&&void 0===y){if(p.splice(b,1),0===p.length)return}else p[b]=y;return p},c=function(e,t,i,r){if(void 0===r&&(r=!1),null==e)throw new Error("Cannot call setIn() with "+String(e)+" state");if(null==t)throw new Error("Cannot call setIn() with "+String(t)+" key");return f(e,0,s(t),i,r)},v="FINAL_FORM/form-error",m="FINAL_FORM/array-error";function b(e,t){var i=e.errors,r=e.initialValues,n=e.lastSubmittedValues,a=e.submitErrors,o=e.submitFailed,u=e.submitSucceeded,s=e.submitting,l=e.values,f=t.active,c=t.blur,v=t.change,b=t.data,S=t.focus,h=t.modified,g=t.modifiedSinceLastSubmit,y=t.name,p=t.touched,E=t.validating,F=t.visited,O=d(l,y),k=i?d(i,y):void 0;k&&k[m]&&(k=k[m]);var V=a&&d(a,y),j=r&&d(r,y),w=t.isEqual(j,O),L=!k&&!V;return{active:f,blur:c,change:v,data:b,dirty:!w,dirtySinceLastSubmit:!(!n||t.isEqual(d(n,y),O)),error:k,focus:S,initial:j,invalid:!L,length:Array.isArray(O)?O.length:void 0,modified:h,modifiedSinceLastSubmit:g,name:y,pristine:w,submitError:V,submitFailed:o,submitSucceeded:u,submitting:s,touched:p,valid:L,value:O,visited:F,validating:E}}var S=["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","value","visited","validating"],h=function(e,t){if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(var n=Object.prototype.hasOwnProperty.bind(t),a=0;a<i.length;a++){var o=i[a];if(!n(o)||e[o]!==t[o])return!1}return!0};function g(e,t,i,r,n,a){var o=!1;return n.forEach((function(n){r[n]&&(e[n]=t[n],i&&(~a.indexOf(n)?h(t[n],i[n]):t[n]===i[n])||(o=!0))})),o}var y=["data"],p=function(e,t,i,r){var n={blur:e.blur,change:e.change,focus:e.focus,name:e.name};return g(n,e,t,i,S,y)||!t||r?n:void 0},E=["active","dirty","dirtyFields","dirtyFieldsSinceLastSubmit","dirtySinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitting","submitError","submitErrors","submitFailed","submitSucceeded","touched","valid","validating","values","visited"],F=["touched","visited"];function O(e,t,i,r){var n={};return g(n,e,t,i,E,F)||!t||r?n:void 0}var k=function(e){var t,i;return function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t&&n.length===t.length&&!n.some((function(e,i){return!h(t[i],e)}))||(t=n,i=e.apply(void 0,n)),i}},V=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then},j=function(e,t){return e===t},w=function(e){return Object.keys(e).some((function(t){var i=e[t];return!i||"object"!=typeof i||i instanceof Error?void 0!==i:w(i)}))};function L(e,t,i,r,n,a){var o=n(i,r,t,a);return!!o&&(e(o),!0)}function N(e,t,i,r,n){var a=e.entries;Object.keys(a).forEach((function(e){var o=a[Number(e)];if(o){var u=o.subscription,s=o.subscriber,d=o.notified;L(s,u,t,i,r,n||!d)&&(o.notified=!0)}}))}e.ARRAY_ERROR=m,e.FORM_ERROR=v,e.configOptions=["debug","initialValues","keepDirtyOnReinitialize","mutators","onSubmit","validate","validateOnBlur","callbackScheduler"],e.createForm=function(e){if(!e)throw new Error("No config specified");e.debug;var i=e.destroyOnUnregister,r=e.keepDirtyOnReinitialize,n=e.initialValues,a=e.mutators,o=e.onSubmit,u=e.validate,s=e.validateOnBlur,l=e.callbackScheduler;if(!o)throw new Error("No onSubmit function specified");var f={subscribers:{index:0,entries:{}},fieldSubscribers:{},fields:{},formState:{asyncErrors:{},dirtySinceLastSubmit:!1,modifiedSinceLastSubmit:!1,errors:{},initialValues:n&&t({},n),pristine:!0,submitting:!1,submitFailed:!1,submitSucceeded:!1,resetWhileSubmitting:!1,valid:!0,validating:0,values:n?t({},n):{}},lastFormState:void 0},S=0,g=!1,y=!1,E=!1,F=0,A={},R=[],P=!1,x=function(e,t){t?(R.push(e),!P&&R.length>0&&(P=!0,(l||function(e){return setTimeout(e,0)})((function(){var e=[].concat(R);R.length=0,P=!1,e.forEach((function(e){return e()}))})))):e()},q=function(e,t,i){var r=i(d(e.formState.values,t));e.formState.values=c(e.formState.values,t,r)||{}},I=function(e,i,r){if(e.fields[i]){var n,a;e.fields=t({},e.fields,((n={})[r]=t({},e.fields[i],{name:r,blur:function(){return G.blur(r)},change:function(e){return G.change(r,e)},focus:function(){return G.focus(r)},lastFieldState:void 0}),n)),delete e.fields[i],e.fieldSubscribers=t({},e.fieldSubscribers,((a={})[r]=e.fieldSubscribers[i],a)),delete e.fieldSubscribers[i];var o=d(e.formState.values,i);e.formState.values=c(e.formState.values,i,void 0)||{},e.formState.values=c(e.formState.values,r,o)||{},delete e.lastFormState}},W=function(e){return function(){if(a){for(var t={formState:f.formState,fields:f.fields,fieldSubscribers:f.fieldSubscribers,lastFormState:f.lastFormState},i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];var o=a[e](r,t,{changeValue:q,getIn:d,renameField:I,resetFieldState:G.resetFieldState,setIn:c,shallowEqual:h});return f.formState=t.formState,f.fields=t.fields,f.fieldSubscribers=t.fieldSubscribers,f.lastFormState=t.lastFormState,_(void 0,(function(){U(void 0),$()})),o}}},C=a?Object.keys(a).reduce((function(e,t){return e[t]=W(t),e}),{}):{},z=function(e){return Object.keys(e.validators).reduce((function(t,i){var r=e.validators[Number(i)]();return r&&t.push(r),t}),[])},_=function(e,i){if(g)return y=!0,void i();var r=f.fields,n=f.formState,a=t({},r),o=Object.keys(a);if(u||o.some((function(e){return z(a[e]).length}))){var s=!1;if(e){var l=a[e];if(l){var S=l.validateFields;S&&(s=!0,o=S.length?S.concat(e):[e])}}var p,E={},O={},k={},j=[].concat(function(e){var i=[];if(u){var r=u(t({},f.formState.values));V(r)?i.push(r.then((function(t){return e(t,!0)}))):e(r,!1)}return i}((function(e,t){t?O=e||{}:E=e||{}})),o.reduce((function(e,t){return e.concat(function(e,t){var i,r=[],n=z(e);return n.length&&(n.forEach((function(n){var a=n(d(f.formState.values,e.name),f.formState.values,0===n.length||3===n.length?b(f.formState,f.fields[e.name]):void 0);if(a&&V(a)){e.validating=!0;var o=a.then((function(i){f.fields[e.name]&&(f.fields[e.name].validating=!1,t(i))}));r.push(o)}else i||(i=a)})),t(i)),r}(r[t],(function(e){k[t]=e})))}),[])),w=j.length>0,L=++F,N=Promise.all(j).then((p=L,function(e){return delete A[p],e}));w&&(A[L]=N);var R=function(e){var i=t({},s?n.errors:{},E,e?O:n.asyncErrors),l=function(e){o.forEach((function(t){if(r[t]){var n=d(E,t),o=d(i,t),l=z(a[t]).length,f=k[t];e(t,l&&f||u&&n||(n||s?void 0:o))}}))};l((function(e,t){i=c(i,e,t)||{}})),l((function(e,t){if(t&&t[m]){var r=d(i,e),n=[].concat(r);n[m]=t[m],i=c(i,e,n)}})),h(n.errors,i)||(n.errors=i),e&&(n.asyncErrors=O),n.error=E[v]};if(w&&(f.formState.validating++,i()),R(!1),i(),w){var P=function(){f.formState.validating--,i(),0===f.formState.validating&&f.lastFormState.validating&&$()};N.then((function(){F>L||R(!0)})).then(P,P)}}else i()},U=function(e){if(!S){var i=f.fields,r=f.fieldSubscribers,n=f.formState,a=t({},i),o=function(e){var t=a[e],i=b(n,t),o=t.lastFieldState;t.lastFieldState=i;var u=r[e];u&&N(u,i,o,p,void 0===o)};e?o(e):Object.keys(a).forEach(o)}},B=function(){Object.keys(f.fields).forEach((function(e){f.fields[e].touched=!0}))},T=function(){var e=f.fields,i=f.formState,r=f.lastFormState,n=t({},e),a=Object.keys(n),o=!1,u=a.reduce((function(e,t){return!n[t].isEqual(d(i.values,t),d(i.initialValues||{},t))&&(o=!0,e[t]=!0),e}),{}),s=a.reduce((function(e,t){var r=i.lastSubmittedValues||{};return n[t].isEqual(d(i.values,t),d(r,t))||(e[t]=!0),e}),{});i.pristine=!o,i.dirtySinceLastSubmit=!(!i.lastSubmittedValues||!Object.values(s).some((function(e){return e}))),i.modifiedSinceLastSubmit=!(!i.lastSubmittedValues||!Object.keys(n).some((function(e){return n[e].modifiedSinceLastSubmit}))),i.valid=!(i.error||i.submitError||w(i.errors)||i.submitErrors&&w(i.submitErrors));var l=function(e){var t=e.active,i=e.dirtySinceLastSubmit,r=e.modifiedSinceLastSubmit,n=e.error,a=e.errors,o=e.initialValues,u=e.pristine,s=e.submitting,d=e.submitFailed,l=e.submitSucceeded,f=e.submitError,c=e.submitErrors,v=e.valid,m=e.validating,b=e.values;return{active:t,dirty:!u,dirtySinceLastSubmit:i,modifiedSinceLastSubmit:r,error:n,errors:a,hasSubmitErrors:!!(f||c&&w(c)),hasValidationErrors:!!(n||a&&w(a)),invalid:!v,initialValues:o,pristine:u,submitting:s,submitFailed:d,submitSucceeded:l,submitError:f,submitErrors:c,valid:v,validating:m>0,values:b}}(i),c=a.reduce((function(e,t){return e.modified[t]=n[t].modified,e.touched[t]=n[t].touched,e.visited[t]=n[t].visited,e}),{modified:{},touched:{},visited:{}}),v=c.modified,m=c.touched,b=c.visited;return l.dirtyFields=r&&h(r.dirtyFields,u)?r.dirtyFields:u,l.dirtyFieldsSinceLastSubmit=r&&h(r.dirtyFieldsSinceLastSubmit,s)?r.dirtyFieldsSinceLastSubmit:s,l.modified=r&&h(r.modified,v)?r.modified:v,l.touched=r&&h(r.touched,m)?r.touched:m,l.visited=r&&h(r.visited,b)?r.visited:b,r&&h(r,l)?r:l},D=!1,M=!1,$=function(){if(D)M=!0;else{if(D=!0,!(S||g&&E)){var e=f.lastFormState,t=T();t!==e&&(f.lastFormState=t,N(f.subscribers,t,e,O))}D=!1,M&&(M=!1,$())}},Y=function(){return Object.keys(f.fields).forEach((function(e){return f.fields[e].modifiedSinceLastSubmit=!1}))};_(void 0,(function(){$()}));var G={batch:function(e){S++,e(),S--,U(void 0),$()},blur:function(e){var i=f.fields,r=f.formState,n=i[e];n&&(delete r.active,i[e]=t({},n,{active:!1,touched:!0}),s?_(e,(function(){U(void 0),$()})):(U(void 0),$()))},change:function(e,i){var r=f.fields,n=f.formState;if(d(n.values,e)!==i){q(f,e,(function(){return i}));var a=r[e];a&&(r[e]=t({},a,{modified:!0,modifiedSinceLastSubmit:!!n.lastSubmittedValues})),s?(U(void 0),$()):_(e,(function(){U(void 0),$()}))}},get destroyOnUnregister(){return!!i},set destroyOnUnregister(e){i=e},focus:function(e){var t=f.fields[e];t&&!t.active&&(f.formState.active=e,t.active=!0,t.visited=!0,U(void 0),$())},mutators:C,getFieldState:function(e){var t=f.fields[e];return t&&t.lastFieldState},getRegisteredFields:function(){return Object.keys(f.fields)},getState:function(){return T()},initialize:function(e){var i=f.fields,n=f.formState,a=t({},i),o="function"==typeof e?e(n.values):e;r||(n.values=o);var u=r?Object.keys(a).reduce((function(e,t){return a[t].isEqual(d(n.values,t),d(n.initialValues||{},t))||(e[t]=d(n.values,t)),e}),{}):{};n.initialValues=o,n.values=o,Object.keys(u).forEach((function(e){n.values=c(n.values,e,u[e])||{}})),_(void 0,(function(){U(void 0),$()}))},isValidationPaused:function(){return g},pauseValidation:function(e){void 0===e&&(e=!0),g=!0,E=e},registerField:function(e,t,r,n){void 0===r&&(r={}),f.fieldSubscribers[e]||(f.fieldSubscribers[e]={index:0,entries:{}});var a=f.fieldSubscribers[e].index++;f.fieldSubscribers[e].entries[a]={subscriber:k(t),subscription:r,notified:!1};var o=f.fields[e]||{active:!1,afterSubmit:n&&n.afterSubmit,beforeSubmit:n&&n.beforeSubmit,data:n&&n.data||{},isEqual:n&&n.isEqual||j,lastFieldState:void 0,modified:!1,modifiedSinceLastSubmit:!1,name:e,touched:!1,valid:!0,validateFields:n&&n.validateFields,validators:{},validating:!1,visited:!1,blur:function(){return G.blur(e)},change:function(t){return G.change(e,t)},focus:function(){return G.focus(e)}};o.blur=o.blur||function(){return G.blur(e)},o.change=o.change||function(t){return G.change(e,t)},o.focus=o.focus||function(){return G.focus(e)},f.fields[e]=o;var u=!1,s=n&&n.silent,l=n&&n.async,v=function(){x((function(){s&&f.fields[e]?U(e):($(),U(void 0))}),!!l)};if(n){u=!(!n.getValidator||!n.getValidator()),n.getValidator&&(f.fields[e].validators[a]=n.getValidator);var m=void 0===d(f.formState.values,e);void 0===n.initialValue||!m&&d(f.formState.values,e)!==d(f.formState.initialValues,e)||(f.formState.initialValues=c(f.formState.initialValues||{},e,n.initialValue),f.formState.values=c(f.formState.values,e,n.initialValue),_(void 0,v)),void 0!==n.defaultValue&&void 0===n.initialValue&&void 0===d(f.formState.initialValues,e)&&m&&(f.formState.values=c(f.formState.values,e,n.defaultValue))}return u?_(void 0,v):v(),function(){var t=!1;f.fields[e]&&(t=!(!f.fields[e].validators[a]||!f.fields[e].validators[a]()),delete f.fields[e].validators[a]);var r=!!f.fieldSubscribers[e];r&&delete f.fieldSubscribers[e].entries[a];var n=r&&!Object.keys(f.fieldSubscribers[e].entries).length;n&&(delete f.fieldSubscribers[e],delete f.fields[e],t&&(f.formState.errors=c(f.formState.errors,e,void 0)||{}),i&&(f.formState.values=c(f.formState.values,e,void 0,!0)||{})),s||(t?_(void 0,(function(){$(),U(void 0)})):n&&$())}},reset:function(e){void 0===e&&(e=f.formState.initialValues),f.formState.submitting&&(f.formState.resetWhileSubmitting=!0),f.formState.submitFailed=!1,f.formState.submitSucceeded=!1,delete f.formState.submitError,delete f.formState.submitErrors,delete f.formState.lastSubmittedValues,G.initialize(e||{})},resetFieldState:function(e){f.fields[e]=t({},f.fields[e],{active:!1,lastFieldState:void 0,modified:!1,touched:!1,valid:!0,validating:!1,visited:!1}),_(void 0,(function(){U(void 0),$()}))},restart:function(e){void 0===e&&(e=f.formState.initialValues),G.batch((function(){for(var i in f.fields)G.resetFieldState(i),f.fields[i]=t({},f.fields[i],{active:!1,lastFieldState:void 0,modified:!1,modifiedSinceLastSubmit:!1,touched:!1,valid:!0,validating:!1,visited:!1});G.reset(e||{})}))},resumeValidation:function(){g=!1,E=!1,y&&_(void 0,(function(){U(void 0),$()})),y=!1},setConfig:function(e,t){switch(e){case"debug":0;break;case"destroyOnUnregister":i=t;break;case"initialValues":G.initialize(t);break;case"keepDirtyOnReinitialize":r=t;break;case"mutators":a=t,t?(Object.keys(C).forEach((function(e){e in t||delete C[e]})),Object.keys(t).forEach((function(e){C[e]=W(e)}))):Object.keys(C).forEach((function(e){delete C[e]}));break;case"onSubmit":o=t;break;case"validate":u=t,_(void 0,(function(){U(void 0),$()}));break;case"validateOnBlur":s=t;break;case"callbackScheduler":l=t;break;default:throw new Error("Unrecognised option "+e)}},setCallbackScheduler:function(e){l=e},submit:function(){var e=f.formState;if(e.submitting)return Promise.resolve(void 0);if(delete e.submitErrors,delete e.submitError,e.lastSubmittedValues=t({},e.values),f.formState.error||w(f.formState.errors))return B(),Y(),f.formState.submitFailed=!0,$(),U(void 0),Promise.resolve(void 0);var i,r=Object.keys(A);if(r.length)return Promise.all(r.map((function(e){return A[Number(e)]}))).then((function(){return G.submit()}),(function(e){console.error(e)}));if(Object.keys(f.fields).some((function(e){return f.fields[e].beforeSubmit&&!1===f.fields[e].beforeSubmit()})))return Promise.resolve(void 0);var n=!1,a=function(t){e.submitting=!1;var r=e.resetWhileSubmitting;return r&&(e.resetWhileSubmitting=!1),t&&w(t)?(e.submitFailed=!0,e.submitSucceeded=!1,e.submitErrors=t,e.submitError=t[v],B()):(r||(e.submitFailed=!1,e.submitSucceeded=!0),Object.keys(f.fields).forEach((function(e){return f.fields[e].afterSubmit&&f.fields[e].afterSubmit()}))),$(),U(void 0),n=!0,i&&i(t),t};e.submitting=!0,e.submitFailed=!1,e.submitSucceeded=!1,e.lastSubmittedValues=t({},e.values),Y();var u=o(e.values,G,a);if(!n){if(u&&V(u))return $(),U(void 0),u.then((function(e){return a(e),e}),(function(e){throw a(void 0),e}));if(o.length>=3)return $(),U(void 0),new Promise((function(e){i=e}));a(u)}return Promise.resolve(void 0)},subscribe:function(e,t){if(!e)throw new Error("No callback given.");if(!t)throw new Error("No subscription provided. What values do you want to listen to?");var i=k(e),r=f.subscribers,n=r.index++;r.entries[n]={subscriber:i,subscription:t,notified:!1};var a=T();return L(i,t,a,a,O,!0),function(){delete r.entries[n]}},subscribeFieldState:function(e,t,i){return G.registerField(e,t,i)},getFieldSnapshot:function(e){var t=f.fields[e];if(t)return b(f.formState,t)},subscribeFormState:function(e,t){return G.subscribe(e,t)},getFormSnapshot:function(){return T()}};return G},e.fieldSubscriptionItems=S,e.formSubscriptionItems=E,e.getIn=d,e.setIn=c,e.version="5.0.0-1"}));
//# sourceMappingURL=final-form.umd.min.js.map
