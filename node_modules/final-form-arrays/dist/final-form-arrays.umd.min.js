((e,r)=>{"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self)["final-form-arrays"]={})})(this,function(e){function h(e,r,t,l){t[l]={...e[r],name:l,change:e[l]&&e[l].change,blur:e[l]&&e[l].blur,focus:e[l]&&e[l].focus,lastFieldState:void 0},t[l].change||delete t[l].change,t[l].blur||delete t[l].blur,t[l].focus||delete t[l].focus}let g=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=([l,i,r],n,{changeValue:e})=>{e(n,l,e=>{e=[...e||[]];return e.splice(i,0,r),e});let f=new RegExp(`^${g(l)}\\[(\\d+)\\](.*)`),s={};Object.keys(n.fields).forEach(e=>{var r=f.exec(e);if(r){var t=Number(r[1]);if(i<=t)return t=l+`[${t+1}]`+r[2],void h(n.fields,e,s,t)}s[e]=n.fields[e]}),n.fields=s};var r=([e,r],t,{changeValue:l})=>{l(t,e,e=>e?[...e,...r]:r)},t=([u,o,d],c,{changeValue:e})=>{if(o!==d){e(c,u,e=>{var e=[...e||[]],r=e[o];return e.splice(o,1),e.splice(d,0,r),e});let i={},n=new RegExp(`^${g(u)}\\[(\\d+)\\](.*)`),f,s,a;a=d<o?(f=d,s=o,1):(f=o,s=d,-1),Object.keys(c.fields).forEach(e=>{var r=n.exec(e);if(r){var t,l=Number(r[1]);if(l===o)return t=u+`[${d}]`+r[2],void h(c.fields,e,i,t);if(f<=l&&l<=s)return t=`${u}[${l+a}]`+r[2],void h(c.fields,e,i,t)}i[e]=c.fields[e]}),c.fields=i}};let n=([n,f],s,{changeValue:e,getIn:a,setIn:u})=>{let t,o=(e(s,n,e=>{var r;return e&&(r=[...e],t=r[f],r.splice(f,1),0<r.length?r:void 0)}),new RegExp(`^${g(n)}\\[(\\d+)\\](.*)`)),d={};return Object.keys(s.fields).forEach(e=>{var r=o.exec(e);if(r){var t,l,i=Number(r[1]);if(i===f)return void(e===n+`[${f}]`&&(t=a(s,l="formState.submitErrors."+n),Array.isArray(t))&&(t.splice(f,1),u(s,l,t)));if(f<i)return l=n+`[${i-1}]`+r[2],void h(s.fields,e,d,l)}d[e]=s.fields[e]}),s.fields=d,t};var l=([e],r,t)=>{var l=t.getIn,l=l(r.formState.values,e);return l&&0<l.length?n([e,l.length-1],r,t):void 0},f=([e,r],t,{changeValue:l})=>{l(t,e,e=>e?[...e,r]:[r])};var s=([i,e],n,{changeValue:r})=>{if(0===e.length)return[];let f=[...e];f.sort();for(let e=f.length-1;0<e;--e)f[e]===f[e-1]&&f.splice(e,1);let s=[],a=(r(n,i,r=>{if(s=e.map(e=>r&&r[e]),!r)return r;var t=[...r];for(let e=f.length-1;0<=e;--e){var l=f[e];t.splice(l,1)}return 0<t.length?t:void 0}),new RegExp(`^${g(i)}\\[(\\d+)\\](.*)`)),u={};return Object.keys(n.fields).forEach(e=>{var r=a.exec(e);if(r){var t=Number(r[1]),l=((e,r)=>{let t=0,l=e.length-1;for(var i;t<=l;){if(e[i=Math.floor((t+l)/2)]===r)return i;r<e[i]?l=i-1:t=i+1}return~t})(f,t);if(0<=l)return;if(t>f[0])return t=i+`[${t-~l}]`+r[2],void h(n.fields,e,u,t)}u[e]=n.fields[e]}),n.fields=u,s},a=([e],r,t)=>n([e,0],r,t),u=([e,n,f],s,{changeValue:r})=>{if(n!==f){r(s,e,e=>{var e=[...e||[]],r=e[n];return e[n]=e[f],e[f]=r,e});let t=e+`[${n}]`,l=e+`[${f}]`,i={};Object.keys(s.fields).forEach(e=>{var r;e.substring(0,t.length)===t?(r=e.substring(t.length),r=l+r,h(s.fields,e,i,r)):e.substring(0,l.length)===l?(r=e.substring(l.length),r=t+r,h(s.fields,e,i,r)):i[e]=s.fields[e]}),s.fields=i}},o=([e,r],t,l)=>i([e,0,r],t,l),d=([e,r,t],l,{changeValue:i})=>{i(l,e,e=>{e=[...e||[]];return e.splice(r,1,t),e})},c={insert:i,concat:r,move:t,pop:l,push:f,remove:n,removeBatch:s,shift:a,swap:u,unshift:o,update:d};e.concat=r,e.default=c,e.insert=i,e.move=t,e.pop=l,e.push=f,e.remove=n,e.removeBatch=s,e.shift=a,e.swap=u,e.unshift=o,e.update=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=final-form-arrays.umd.min.js.map
